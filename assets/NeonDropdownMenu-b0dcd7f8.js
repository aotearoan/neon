import{a as S,b as V,l as I,g as L,_ as M}from"../index.js";import{N as U,a as m}from"./NeonDropdown-f9c34229.js";import{N as A}from"./NeonScrollUtils-e1749a09.js";import{u as E,v as F,R as u,S as K,U as R,V as T,D as k,x as t,F as c,G as C,H as p,y as f,M as G,O as $,P as q,A as g,Q as N,z as Q}from"./vendor-7a8d752b.js";const j=E({name:"NeonDropdownMenu",components:{NeonDropdown:U,NeonIcon:S,NeonLink:V},props:{model:{type:Array,required:!0},size:{type:String,default:I.Medium},color:{type:String,default:L.LowContrast},disabled:{type:Boolean,default:!1},openOnHover:{type:Boolean,default:!1}},emits:["click","button-ref"],setup(o,{emit:l}){const B=F(),w=u(null),v=u(null),_=u([]),s=u(!1),r=u(null),a=u(-1),e=n=>{r.value=n,a.value=o.model.findIndex(d=>d.key===n)},b=n=>{v.value=n},H=()=>{switch(v.value){case m.TopLeft:case m.TopRight:case m.LeftBottom:case m.RightBottom:return!0}return!1},O=()=>{var d;const n=(d=w.value)==null?void 0:d.querySelector(".neon-dropdown-menu__item--highlighted");A.scrollIntoView(n)},h=(n,d)=>{const i=a.value+n;i>=0&&i<=o.model.length-1&&(a.value=i,r.value=o.model[a.value].key,d.preventDefault(),setTimeout(O))},y=n=>{if(!o.disabled&&s.value)switch(n.code){case"ArrowUp":case"ArrowDown":{const d=H()?-1:1;n.code==="ArrowUp"?h(-1*d,n):h(1*d,n)}break;case"Enter":case"Space":o.model[a.value]&&!o.model[a.value].disabled&&(D(o.model[a.value]),n.preventDefault());break;case"Tab":!n.ctrlKey&&!n.metaKey&&!n.altKey&&(s.value=!1);break;case"Escape":s.value=!1;break}},D=n=>{var d;if(!n.disabled){if(n.href){const i=(d=_.value[a.value])==null?void 0:d.firstElementChild;i&&i.click()}else l("click",n);s.value=!1}},z=()=>{o.openOnHover&&(s.value=!0)},P=()=>{o.openOnHover&&(s.value=!1)};return K(()=>{document.addEventListener("keydown",y)}),R(()=>{document.removeEventListener("keydown",y)}),T(()=>s.value,n=>{n&&(r.value=o.model[0].key,a.value=0)}),{dropdown:w,items:_,open:s,highlightedKey:r,highlightedIndex:a,attrs:B,emit:l,changeHighlighted:e,keyboardHandler:y,onBlur:P,onFocus:z,clickItem:D,navigateBy:h,onPlacement:b}}}),J={class:"no-style neon-dropdown-menu__items",role:"menu"},W=["onMouseover"],X={key:0,class:"neon-dropdown-menu__item-container"},Y={class:"neon-dropdown-menu__item-label"},Z={class:"neon-dropdown-menu__item-label"},x=["onClick"],ee={class:"neon-dropdown-menu__item-label"};function oe(o,l,B,w,v,_){const s=k("neon-icon"),r=k("neon-link"),a=k("neon-dropdown");return t(),c(a,Q({ref:"dropdown",modelValue:o.open,"onUpdate:modelValue":l[0]||(l[0]=e=>o.open=e),class:[`neon-dropdown-menu--${o.color}`,"neon-dropdown-menu"],color:o.color,disabled:o.disabled,openOnHover:o.openOnHover,size:o.size},o.attrs,{onBlur:l[1]||(l[1]=e=>o.onBlur()),onButton:l[2]||(l[2]=e=>o.emit("button-ref",e)),onFocus:l[3]||(l[3]=e=>o.onFocus()),"onUpdate:modelValue":l[4]||(l[4]=e=>o.open=e),onDropdownPlacement:o.onPlacement}),{default:C(()=>[p("ul",J,[(t(!0),f(G,null,$(o.model,e=>(t(),f("li",{key:e.key,ref_for:!0,ref:"items",class:q([[{"neon-dropdown-menu__item--disabled":e.disabled,"neon-dropdown-menu__item--separator-before":e.separatorBefore,"neon-dropdown-menu__item--group-title":e.isGroup,"neon-dropdown-menu__item--grouped":e.grouped,"neon-dropdown-menu__item--highlighted":e.key===o.highlightedKey},`neon-dropdown-menu__item--${o.size}`],"neon-dropdown-menu__item"]),onMouseover:b=>o.changeHighlighted(e.key)},[e.isGroup?(t(),f("div",X,[e.icon?(t(),c(s,{key:0,disabled:e.disabled,name:e.icon,class:"neon-dropdown-menu__item-icon"},null,8,["disabled","name"])):g("",!0),p("span",Y,N(e.label),1)])):e.href&&!e.disabled?(t(),c(r,{key:1,href:e.href,"no-style":!0,"outline-style":"none",role:"menuitem"},{default:C(()=>[e.icon?(t(),c(s,{key:0,disabled:e.disabled,name:e.icon,class:"neon-dropdown-menu__item-icon"},null,8,["disabled","name"])):g("",!0),p("span",Z,N(e.label),1)]),_:2},1032,["href"])):(t(),f("div",{key:2,class:"neon-dropdown-menu__item-container",role:"menuitem",onClick:b=>o.clickItem(e)},[e.icon?(t(),c(s,{key:0,disabled:e.disabled,name:e.icon,class:"neon-dropdown-menu__item-icon"},null,8,["disabled","name"])):g("",!0),p("span",ee,N(e.label),1)],8,x))],42,W))),128))])]),_:1},16,["modelValue","class","color","disabled","openOnHover","size","onDropdownPlacement"])}const de=M(j,[["render",oe]]);export{de as N};
