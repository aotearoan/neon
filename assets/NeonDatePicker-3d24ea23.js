import{N as ge,d as pe,l as ve,g as he,_ as ye}from"../index.js";import{N as De,a as fe}from"./NeonDropdown-f9c34229.js";import{u as ke,v as Se,R as z,w as p,D as A,x as s,y as v,L as S,G as J,H as c,J as Q,K as W,M,Q as I,O as T,P as F,F as P,A as Ye,z as $e}from"./vendor-7a8d752b.js";class b{static stringToNeonDate(a,i,r=!1){const u=i||navigator.language,f=new Date,o=new Date(!r&&a.length===10?`${a}T${f.toISOString().split("T")[1]}`:a);let l;a.length>10&&(l=o.toLocaleString(u,a.length<=16?{hour12:!1,hour:"2-digit",minute:"2-digit"}:{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}));const k={year:+o.toLocaleString("en-US",{year:"numeric"}),yearFormatted:o.toLocaleString(u,{year:"numeric"}),month:+o.toLocaleString("en-US",{month:"numeric"}),monthShortName:o.toLocaleString(u,{month:"short"}),monthLongName:o.toLocaleString(u,{month:"long"}),day:+o.toLocaleString("en-US",{day:"numeric"}),dayFormatted:o.toLocaleString(u,{day:"2-digit"})};return l&&(k.time=l),k}static dateToIso(a,i=!1){const r=a.toISOString();return i?r:r.split("T")[0]}static dmyToIso(a,i,r){return`${r}-${i<10?"0"+i:i}-${a<10?"0"+a:a}`}static dowNames(a){const i=a||navigator.language,r=new Date,u=[];for(;!u[r.getDay()];)u[r.getDay()]=r.toLocaleString(i,{weekday:"short"}),r.setDate(r.getDate()+1);const f=u.shift();return f&&u.push(f),u}static monthNames(a){const i=a||navigator.language;return Array.from(Array(12).keys()).map(r=>new Date(2023,r,15).toLocaleString(i,{month:"short"}))}static toCalendarConfiguration(a,i,r,u,f){const o=f||navigator.language,l=b.stringToNeonDate(b.dateToIso(new Date),o),k=a?b.stringToNeonDate(a,o,!0):void 0,n=i||l.month,g=i&&r?new Date(r,i-1,15):null,m=(g==null?void 0:g.toLocaleString(o,{month:"long"}))||l.monthLongName,Y=r||l.year,h=u||Math.floor(Y/10)*10,d=new Date(Y,(n+11)%12,1),$=new Date(Y,(n+11)%12,1);$.setDate($.getDate()-1);const C=[];let D=1,O=!1;for(let L=0;L<6;L++){C[L]=[];for(let w=0;w<7;w++)if(L===0&&w<$.getDay())C[L][w]=null;else if(C[L][w]=d.getDate(),D=d.getDate(),d.setDate(d.getDate()+1),d.getDate()===1){for(let V=w+1;V<7;V++)C[L][V]=null;O=!0;break}if(O)break}return{today:l,selected:k,pageMonth:n,pageMonthName:m,pageYear:Y,pageDecadeStart:h,dowNames:b.dowNames(o),dates:C,lastDayOfMonth:D,months:b.monthNames(o)}}}const Ne=ke({name:"NeonDatePicker",components:{NeonButton:ge,NeonDropdown:De,NeonInput:pe},props:{modelValue:{type:String,default:null},locale:{type:String,default:null},disabled:{type:Boolean,default:!1},size:{type:String,default:ve.Medium},color:{type:String,default:he.Primary},min:{type:String,default:null},max:{type:String,default:null},placement:{type:String,default:fe.BottomLeft},disabledDates:{type:Array,default:()=>[]},placeholder:{type:String,required:!1},openCalendarLabel:{type:String,default:"Open calendar"},doneLabel:{type:String,default:"Done"},clearLabel:{type:String,default:"Clear"},changeMonthLabel:{type:String,default:"Change month"},previousMonthLabel:{type:String,default:"Previous month"},nextMonthLabel:{type:String,default:"Next month"},changeYearLabel:{type:String,default:"Change year"},previousYearLabel:{type:String,default:"Previous year"},nextYearLabel:{type:String,default:"Next year"},previousDecadeLabel:{type:String,default:"Previous decade"},nextDecadeLabel:{type:String,default:"Next decade"}},setup(e,{emit:a}){const i=Se(),r=!i.required,u=z(null),f=z(null),o=z(!1),l=z(!1),k=z(!1),n=p(()=>{if(e.modelValue){const t=b.stringToNeonDate(e.modelValue,e.locale,!0);if(t){const{dayFormatted:y,monthShortName:N,yearFormatted:be}=t;return`${y} ${N} ${be}`}}return""}),g=(t,y,N)=>b.dmyToIso(t,y,N),m=new Date,Y=e.locale||navigator.language,h=z(m.getMonth()),d=z(m.getFullYear()),$=z(Math.floor(d.value/10)*10),C=()=>{h.value=e.modelValue?+e.modelValue.substring(5,7):+m.toLocaleString(Y,{month:"numeric"}),d.value=e.modelValue?+e.modelValue.substring(0,4):+m.toLocaleString(Y,{year:"numeric"}),$.value=Math.floor(d.value/10)*10};C();const D=p(()=>b.toCalendarConfiguration(e.modelValue,h.value,d.value,$.value,e.locale)),O=p(()=>{const{day:t,month:y,year:N}=D.value.today;return b.dmyToIso(t,y,N)}),L=()=>{if(!e.disabled&&(C(),o.value=!0,f.value)){const t=f.value.querySelector(".neon-date-picker__calendar-date--selected");t&&setTimeout(()=>t.focus())}},w=t=>{a("update:modelValue",t)},V=()=>{h.value===1?(h.value=12,d.value=d.value-1):h.value=h.value-1},X=()=>{h.value===12?(h.value=1,d.value=d.value+1):h.value=h.value+1},Z=()=>{l.value=!0},q=p(()=>e.min&&e.min>=b.dmyToIso(1,D.value.pageMonth,D.value.pageYear)),K=p(()=>{const{pageYear:t,pageMonth:y,lastDayOfMonth:N}=D.value;return e.max&&e.max<=b.dmyToIso(N,y,t)}),_=p(()=>q.value&&K.value),x=()=>{d.value=d.value-1},ee=()=>{d.value=d.value+1},ae=()=>{k.value=!0},R=p(()=>e.min&&e.min>=b.dmyToIso(1,1,D.value.pageYear)),U=p(()=>e.max&&e.max<=b.dmyToIso(31,12,D.value.pageYear)),ne=p(()=>R.value&&U.value),le=()=>{$.value=$.value-10},te=()=>{$.value=$.value+10},oe=p(()=>e.min&&e.min>=b.dmyToIso(1,1,Math.floor(D.value.pageYear/10)*10)),re=p(()=>e.max&&e.max<=b.dmyToIso(31,12,Math.floor(D.value.pageYear/10)*10+9)),B=()=>{l.value=!1,k.value=!1},se=()=>{o.value=!1,B()},ie=()=>{a("update:modelValue",null),o.value=!1,B()},de=t=>{h.value=t,l.value=!1},ue=t=>{d.value=t,k.value=!1},ce=t=>{var y;return((y=e.disabledDates)==null?void 0:y.indexOf(t))>=0||e.min&&e.min>t||e.max&&e.max<t},me=(t,y)=>{const N=`${t}-${y<10?"0"+y:y}`;return E.value&&E.value>N||H.value&&H.value<N},j=p(()=>e.min?+e.min.substring(0,4):null),E=p(()=>e.min?e.min.substring(0,7):null),G=p(()=>e.max?+e.max.substring(0,4):null),H=p(()=>e.max?e.max.substring(0,7):null);return{attrs:i,calendar:D,calendarOpen:o,dropdown:u,formattedValue:n,isChangeDateDisabled:_,isChangeYearDisabled:ne,isNextDisabled:K,isNextDecadeDisabled:re,isNextYearDisabled:U,isPreviousDisabled:q,isPreviousDecadeDisabled:oe,isPreviousYearDisabled:R,monthSelectionOpen:l,optional:r,today:O,calendarRef:f,yearSelectionOpen:k,changeMonth:Z,changeYear:ae,clear:ie,done:se,emitDate:w,isDisabled:ce,isoDate:g,isMonthDisabled:me,isYearDisabled:t=>j.value&&j.value>t||G.value&&G.value<t,openCalendar:L,onNext:X,onNextDecade:te,onNextYear:ee,onPrevious:V,onPreviousDecade:le,onPreviousYear:x,resetToCalendar:B,selectMonth:de,selectYear:ue}}}),Le=["aria-label","tabindex"],Me={ref:"calendarRef",class:"neon-date-picker__calendar"},Ce={class:"neon-date-picker__calendar-header"},we={class:"neon-date-picker__calendar-title-readonly"},ze={class:"neon-date-picker__calendar-header-actions"},Ve=c("hr",null,null,-1),Te={class:"neon-date-picker__calendar-options"},Pe={class:"neon-date-picker__calendar-header"},Oe={key:0,class:"neon-date-picker__calendar-title-readonly"},Ie={class:"neon-date-picker__calendar-header-actions"},Fe=c("hr",null,null,-1),Be={class:"neon-date-picker__calendar-options"},Ae={class:"neon-date-picker__calendar-header"},qe={key:0,class:"neon-date-picker__calendar-title-readonly"},Ke={class:"neon-date-picker__calendar-header-actions"},Re={class:"neon-date-picker__calendar-dows"},Ue=c("hr",null,null,-1),je=c("hr",null,null,-1),Ee={class:"neon-button-group"};function Ge(e,a,i,r,u,f){const o=A("neon-input"),l=A("neon-button"),k=A("neon-dropdown");return s(),v("div",{class:F([[`neon-date-picker--${e.size}`,`neon-date-picker--${e.color}`,{"neon-date-picker--disabled":e.disabled,"neon-date-picker--open":e.calendarOpen}],"neon-date-picker"])},[S(k,{ref:"dropdown",modelValue:e.calendarOpen,"onUpdate:modelValue":[a[13]||(a[13]=n=>e.calendarOpen=n),a[14]||(a[14]=n=>e.resetToCalendar())],placement:e.placement},{"dropdown-button":J(()=>[S(o,{color:e.color,disabled:e.disabled,"icon-readonly":!0,"model-value":e.formattedValue,placeholder:e.placeholder,size:e.size,tabindex:-1,class:"neon-date-picker__button",icon:"calendar",type:"text"},null,8,["color","disabled","model-value","placeholder","size"]),c("div",{"aria-label":e.openCalendarLabel,tabindex:e.disabled?-1:0,class:"neon-date-picker__button-click-capture",role:"button",onClick:a[0]||(a[0]=n=>!e.disabled&&e.openCalendar()),onKeydown:[a[1]||(a[1]=Q(W(n=>e.openCalendar(),["stop","prevent"]),["enter"])),a[2]||(a[2]=Q(W(n=>e.openCalendar(),["stop","prevent"]),["space"]))]},null,40,Le)]),default:J(()=>[c("div",Me,[e.yearSelectionOpen?(s(),v(M,{key:0},[c("div",Ce,[c("span",we,I(`${e.calendar.pageDecadeStart}â€“${e.calendar.pageDecadeStart+9}`),1),c("div",ze,[S(l,{"aria-label":e.previousDecadeLabel,circular:!0,color:e.color,disabled:e.isPreviousDecadeDisabled,"button-style":"text",class:"neon-date-picker__previous-button",icon:"chevron-left",size:"m",onClick:a[3]||(a[3]=n=>e.onPreviousDecade())},null,8,["aria-label","color","disabled"]),S(l,{"aria-label":e.nextDecadeLabel,circular:!0,color:e.color,disabled:e.isNextDecadeDisabled,"button-style":"text",class:"neon-date-picker__next-button",icon:"chevron-right",size:"m",onClick:a[4]||(a[4]=n=>e.onNextDecade())},null,8,["aria-label","color","disabled"])])]),Ve,c("div",Te,[(s(),v(M,null,T(10,n=>S(l,{key:n,class:F([{"neon-date-picker__calendar-option--selected":e.calendar.pageYear===e.calendar.pageDecadeStart+n-1,"neon-date-picker__calendar-option--today":e.calendar.today.year===e.calendar.pageDecadeStart+n-1,"neon-date-picker__calendar-option--disabled":e.isYearDisabled(e.calendar.pageDecadeStart+n-1)},"neon-date-picker__calendar-option"]),color:e.color,disabled:e.isYearDisabled(e.calendar.pageDecadeStart+n-1),"full-width":!0,label:`${e.calendar.pageDecadeStart+n-1}`,"button-style":"text",size:"s",onClick:g=>e.selectYear(e.calendar.pageDecadeStart+n-1)},null,8,["class","color","disabled","label","onClick"])),64))])],64)):e.monthSelectionOpen?(s(),v(M,{key:1},[c("div",Pe,[e.isChangeYearDisabled?(s(),v("span",Oe,I(e.calendar.pageYear),1)):(s(),P(l,{key:1,"aria-label":e.changeYearLabel,label:`${e.calendar.pageYear}`,"button-style":"text",class:"neon-date-picker__calendar-header-title",color:"high-contrast",icon:"switch","icon-position":"right",size:"m",onClick:a[5]||(a[5]=n=>e.changeYear())},null,8,["aria-label","label"])),c("div",Ie,[S(l,{"aria-label":e.previousYearLabel,circular:!0,color:e.color,disabled:e.isPreviousYearDisabled,"button-style":"text",class:"neon-date-picker__previous-button",icon:"chevron-left",size:"m",onClick:a[6]||(a[6]=n=>e.onPreviousYear())},null,8,["aria-label","color","disabled"]),S(l,{"aria-label":e.nextYearLabel,circular:!0,color:e.color,disabled:e.isNextYearDisabled,"button-style":"text",class:"neon-date-picker__next-button",icon:"chevron-right",size:"m",onClick:a[7]||(a[7]=n=>e.onNextYear())},null,8,["aria-label","color","disabled"])])]),Fe,c("div",Be,[(s(!0),v(M,null,T(e.calendar.months,(n,g)=>(s(),P(l,{key:g,class:F([{"neon-date-picker__calendar-option--selected":g+1===e.calendar.pageMonth,"neon-date-picker__calendar-option--today":g+1===e.calendar.today.month&&e.calendar.today.year===e.calendar.pageYear,"neon-date-picker__calendar-option--disabled":e.isMonthDisabled(e.calendar.pageYear,g+1)},"neon-date-picker__calendar-option"]),color:e.color,disabled:e.isMonthDisabled(e.calendar.pageYear,g+1),"full-width":!0,label:n,"button-style":"text",size:"s",onClick:m=>e.selectMonth(g+1)},null,8,["class","color","disabled","label","onClick"]))),128))])],64)):(s(),v(M,{key:2},[c("div",Ae,[e.isChangeDateDisabled?(s(),v("span",qe,I(`${e.calendar.pageMonthName} ${e.calendar.pageYear}`),1)):(s(),P(l,{key:1,"aria-label":e.changeMonthLabel,label:`${e.calendar.pageMonthName} ${e.calendar.pageYear}`,"button-style":"text",class:"neon-date-picker__calendar-header-title",color:"high-contrast",icon:"switch","icon-position":"right",size:"m",onClick:a[8]||(a[8]=n=>e.changeMonth())},null,8,["aria-label","label"])),c("div",Ke,[S(l,{"aria-label":e.previousMonthLabel,circular:!0,color:e.color,disabled:e.isPreviousDisabled,"button-style":"text",class:"neon-date-picker__previous-button",icon:"chevron-left",size:"m",onClick:a[9]||(a[9]=n=>e.onPrevious())},null,8,["aria-label","color","disabled"]),S(l,{"aria-label":e.nextMonthLabel,circular:!0,color:e.color,disabled:e.isNextDisabled,"button-style":"text",class:"neon-date-picker__next-button",icon:"chevron-right",size:"m",onClick:a[10]||(a[10]=n=>e.onNext())},null,8,["aria-label","color","disabled"])])]),c("div",Re,[(s(!0),v(M,null,T(e.calendar.dowNames,n=>(s(),v("div",{key:n,class:"neon-date-picker__calendar-dow"},I(n),1))),128))]),Ue,(s(!0),v(M,null,T(e.calendar.dates,(n,g)=>(s(),v("div",{key:g,class:"neon-date-picker__calendar-dates"},[(s(!0),v(M,null,T(n,(m,Y)=>(s(),v(M,null,[m?(s(),P(l,{key:Y,circular:!0,class:F([{"neon-date-picker__calendar-date--selected":e.modelValue===e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear),"neon-date-picker__calendar-date--today":e.today===e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear),"neon-date-picker__calendar-date--disabled":e.isDisabled(e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear))},"neon-date-picker__calendar-date"]),color:e.color,disabled:e.isDisabled(e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear)),label:`${m}`,tabindex:e.isDisabled(e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear))?-1:0,transparent:!0,"button-style":"text",size:"m",onClick:h=>e.emitDate(e.isoDate(m,e.calendar.pageMonth,e.calendar.pageYear))},null,8,["class","color","disabled","label","tabindex","onClick"])):(s(),v("div",{key:`${Y}-empty`,class:"neon-date-picker__calendar-date neon-date-picker__calendar-date--empty"}))],64))),256))]))),128))],64)),je,c("div",Ee,[e.optional?(s(),P(l,{key:0,label:e.clearLabel,"button-style":"text",class:"neon-date-picker__calendar-clear-button",color:"high-contrast",size:"s",onClick:a[11]||(a[11]=n=>e.clear())},null,8,["label"])):Ye("",!0),S(l,{color:e.color,label:e.doneLabel,"button-style":"text",class:"neon-date-picker__calendar-done-button",size:"s",onClick:a[12]||(a[12]=n=>e.done())},null,8,["color","label"])])],512)]),_:1},8,["modelValue","placement"]),S(o,$e({disabled:e.disabled,"hide-icon":!0,max:e.max,min:e.min,"model-value":e.modelValue,size:e.size,tabindex:-1,class:"neon-date-picker__native-input",type:"date"},e.attrs,{"onUpdate:modelValue":e.emitDate}),null,16,["disabled","max","min","model-value","size","onUpdate:modelValue"])],2)}const Xe=ye(Ne,[["render",Ge]]);export{Xe as N,b as a};
