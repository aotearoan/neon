import{b as W,a as F,g as V,l as D,_ as H}from"../index.js";import{N as K}from"./NeonDropdownMenu-b0dcd7f8.js";import{u as R,C as A,R as u,S as G,a7 as N,U as P,D as _,x as d,y as g,H as $,M as U,O as q,P as p,F as C,G as J,A as Q,Q as T,J as B,K as j,L as X}from"./vendor-7a8d752b.js";const Y=R({name:"NeonMenu",components:{NeonDropdownMenu:K,NeonLink:W,NeonIcon:F},props:{menu:{type:Array,required:!0},color:{type:String,default:V.Brand},size:{type:String,default:D.Large},priorityMenuEnabled:{type:Boolean,default:!0}},emits:["click"],setup(n,{emit:m}){const f=A(),v=u(null),h=u(null),i=u(null),r=u([]),y=u([]),a=u([]),e=s=>{const t=window.getComputedStyle(s),o=parseFloat(t.marginLeft||"0")+parseFloat(t.marginRight||"0");return Math.ceil(s.offsetWidth+o)},k=(s,t)=>({key:s,element:t,width:e(t)}),L=()=>{const s=n.menu.map((t,o)=>h.value&&k(t.key,h.value[o])||null);r.value=s.filter(t=>t!==null)},I=s=>s&&(f==null?void 0:f.path.indexOf(s))>=0,S=s=>{m("click",s)},E=(s,t,o)=>{if(o.map(l=>l.width).reduce((l,c)=>l?l+c:0)<=s-t)return o.map(l=>l.key);let M=s-t,b=[];for(let l=0;l<o.length;l=l+1){const c=o[l];if(M<c.width){l===1&&(b=b.filter(O=>O!==o[0].key));break}M=M-c.width,b.push(c.key)}return b},w=async()=>{await N();const s=v.value&&e(v.value)||0,t=i.value&&e(i.value)||0;a.value=E(s,t,r.value),y.value=n.menu.filter(o=>a.value.indexOf(o.key)<0).flatMap(o=>[{...o,isGroup:o.children&&o.children.length>0},...(o.children||[]).map(z=>({...z,grouped:!0}))]),r.value.forEach(o=>{o.element.hidden=a.value.indexOf(o.key)<0}),i.value&&(i.value.hidden=r.value.length===a.value.length)};return G(async()=>{n.priorityMenuEnabled&&(await N(),L(),await w(),window.addEventListener("resize",w))}),P(()=>{n.priorityMenuEnabled&&window.removeEventListener("resize",w)}),{menuWrapper:v,menuItem:h,menuItems:r,responsiveButton:i,responsiveMenuItems:y,visible:a,onClick:S,routeMatches:I}}}),Z={ref:"menuWrapper",class:"neon-menu__wrapper"},x={class:"neon-menu__item-label"};function ee(n,m,f,v,h,i){const r=_("neon-dropdown-menu"),y=_("neon-icon"),a=_("neon-link");return d(),g("nav",Z,[$("ul",{class:p([[`neon-menu--${n.color}`,`neon-menu--${n.size}`],"neon-menu no-style"]),role:"menubar"},[(d(!0),g(U,null,q(n.menu,e=>(d(),g("li",{key:e.key,ref_for:!0,ref:"menuItem",class:p([{"neon-menu__item--disabled":e.disabled},"neon-menu__item"])},[e.children?(d(),C(r,{key:`${e.key}DropdownMenu`,class:p({"router-link-active":n.routeMatches(e.href)}),color:n.color,disabled:e.disabled,icon:e.icon,label:e.label,model:e.children,openOnHover:!e.disabled,size:n.size,"dropdown-style":"text-button"},null,8,["class","color","disabled","icon","label","model","openOnHover","size"])):(d(),C(a,{key:`${e.key}Link`,class:p({"router-link-active":n.routeMatches(e.href)}),href:e.href,"no-style":!0,tabindex:e.disabled?-1:0,"outline-style":"none",role:"menuitem",onClick:k=>!e.disabled&&n.onClick(e.key),onKeydown:[B(k=>!e.disabled&&n.onClick(e.key),["enter"]),B(j(k=>!e.disabled&&n.onClick(e.key),["prevent"]),["space"])]},{default:J(()=>[e.icon?(d(),C(y,{key:`${e.key}LinkIcon`,name:e.icon,class:"neon-menu__item-icon",color:"neutral"},null,8,["name"])):Q("",!0),$("span",x,T(e.label),1)]),_:2},1032,["class","href","tabindex","onClick","onKeydown"]))],2))),128))],2),X(r,{class:p([{"neon-menu__responsive-menu--hidden":n.responsiveMenuItems.length===0},"neon-menu__responsive-menu"]),color:n.color,indicator:!1,model:n.responsiveMenuItems,openOnHover:!0,size:n.size,"dropdown-style":"text-button",icon:"ellipsis",placement:"bottom-right",onButtonRef:m[0]||(m[0]=e=>n.responsiveButton=e)},null,8,["class","color","model","size"])],512)}const te=H(Y,[["render",ee]]);export{te as N};
