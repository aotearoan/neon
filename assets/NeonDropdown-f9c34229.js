var H=Object.defineProperty;var $=(t,o,i)=>o in t?H(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i;var d=(t,o,i)=>($(t,typeof o!="symbol"?o+"":o,i),i);import{m as a,N as P,B as k,l as A,g as O,u as F,_ as I}from"../index.js";import{N as R}from"./NeonPlacementUtils-e254198c.js";import{N as W}from"./NeonBadge-0890751f.js";import{u as E,R as c,S as U,U as q,V as J,D as B,x as h,y as L,H as w,I as T,L as y,J as C,K,F as X,A as j,W as G,X as N,P as S}from"./vendor-7a8d752b.js";var p=(t=>(t.TopLeft="top-left",t.TopRight="top-right",t.BottomLeft="bottom-left",t.BottomRight="bottom-right",t.LeftTop="left-top",t.LeftBottom="left-bottom",t.RightTop="right-top",t.RightBottom="right-bottom",t))(p||{});const e=class e{constructor(o,i,l){d(this,"placement");d(this,"majorPlacement");d(this,"minorPlacement");this.placement=o,this.majorPlacement=i,this.minorPlacement=l}static toNeonDropdownPlacementObject(o){return e.PLACEMENTS[o]}static flipMajor(o){return e.FLIP_MAJOR[o.placement]}static flipMinor(o){return e.FLIP_MINOR[o.placement]}static flip(o){return e.flipMinor(e.flipMajor(o))}};d(e,"TopLeft",new e(p.TopLeft,a.Top,a.Left)),d(e,"TopRight",new e(p.TopRight,a.Top,a.Right)),d(e,"BottomLeft",new e(p.BottomLeft,a.Bottom,a.Left)),d(e,"BottomRight",new e(p.BottomRight,a.Bottom,a.Right)),d(e,"LeftTop",new e(p.LeftTop,a.Left,a.Top)),d(e,"LeftBottom",new e(p.LeftBottom,a.Left,a.Bottom)),d(e,"RightTop",new e(p.RightTop,a.Right,a.Top)),d(e,"RightBottom",new e(p.RightBottom,a.Right,a.Bottom)),d(e,"PLACEMENTS",{"top-left":e.TopLeft,"top-right":e.TopRight,"bottom-left":e.BottomLeft,"bottom-right":e.BottomRight,"left-top":e.LeftTop,"left-bottom":e.LeftBottom,"right-top":e.RightTop,"right-bottom":e.RightBottom}),d(e,"FLIP_MAJOR",{"top-left":e.BottomLeft,"top-right":e.BottomRight,"bottom-left":e.TopLeft,"bottom-right":e.TopRight,"left-top":e.RightTop,"left-bottom":e.RightBottom,"right-top":e.LeftTop,"right-bottom":e.LeftBottom}),d(e,"FLIP_MINOR",{"top-left":e.TopRight,"top-right":e.TopLeft,"bottom-left":e.BottomRight,"bottom-right":e.BottomLeft,"left-top":e.LeftBottom,"left-bottom":e.LeftTop,"right-top":e.RightBottom,"right-bottom":e.RightTop});let g=e;class b{static calculatePlacement(o,i,l,n){const s=g.toNeonDropdownPlacementObject(l),{maxWidth:f,maxHeight:m}=R.calculateBounds(n),r=R.calculateAvailableSpace(o,f,m,n),u={top:r.bottom+o.offsetHeight,bottom:r.top+o.offsetHeight,left:r.right+o.offsetWidth,right:r.left+o.offsetWidth};return b.findPlacement(i,r,u,s,g.flipMinor(s),g.flipMajor(s),g.flip(s))}static findPlacement(o,i,l,...n){var f;const s=n.findIndex(m=>b.validPlacement(o,i,l,m));return((f=n[s])==null?void 0:f.placement)||n[0].placement}static validPlacement(o,i,l,n){switch(n.majorPlacement){case a.Top:case a.Bottom:return o.offsetHeight<=i[n.majorPlacement]&&!!n.minorPlacement&&o.offsetWidth<=l[n.minorPlacement];case a.Left:case a.Right:return o.offsetWidth<=i[n.majorPlacement]&&!!n.minorPlacement&&o.offsetHeight<=l[n.minorPlacement]}}}var V=(t=>(t.SolidButton="solid-button",t.Text="text-button",t.SquareBadge="square-badge",t.CircularBadge="circular-badge",t))(V||{});const Q=E({name:"NeonDropdown",components:{NeonBadge:W,NeonButton:P,NeonExpansionIndicator:k},props:{id:{type:String},modelValue:{type:Boolean,required:!0},label:{type:String,default:null},image:{type:String,default:null},imageAlt:{type:String,default:null},icon:{type:String,default:null},indicator:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:A.Medium},color:{type:String,default:O.LowContrast},alternateColor:{type:String,default:null},dropdownStyle:{type:String,default:V.SolidButton},placement:{type:String,default:p.BottomLeft},placementContainer:{type:Object,default:null},openOnHover:{type:Boolean,default:!1}},emits:["update:modelValue","dropdown-placement","blur","focus","button-ref"],setup(t,{emit:o}){const i=c(null),l=c(null),n=c(t.placement),s=c(null),f=()=>{o("update:modelValue",!1)},m=()=>{t.modelValue&&f()},r=()=>{if(t.modelValue&&i.value&&l.value){const v=n.value;n.value=b.calculatePlacement(i.value,l.value,t.placement,t.placementContainer),v!==n.value&&o("dropdown-placement",n.value)}},u=()=>{!t.disabled&&!t.openOnHover&&(o("update:modelValue",!t.modelValue),setTimeout(r))},M=()=>{o("blur")},z=()=>{o("focus")};return U(()=>{!t.openOnHover&&l.value&&(s.value=new F(l.value,m)),window.addEventListener("resize",r,{passive:!0}),window.addEventListener("scroll",r,{passive:!0}),t.placementContainer&&t.placementContainer.addEventListener("scroll",r,{passive:!0})}),q(()=>{t.openOnHover||s.value&&s.value.destroy(),window.removeEventListener("resize",r),window.removeEventListener("scroll",r),t.placementContainer&&t.placementContainer.removeEventListener("scroll",r)}),J(()=>i.value,v=>o("button-ref",v),{immediate:!0}),{dropdownButton:i,dropdownContent:l,dropdownPlacement:n,closableUtils:s,onClose:f,close:m,toggleOpen:u,onBlur:M,onFocus:z}}}),Y={ref:"dropdownButton"},Z={key:0,class:"neon-dropdown__button-wrapper"},D=["id","tabindex"],x=w("div",{class:"neon-dropdown__click-blocker"},null,-1);function _(t,o,i,l,n,s){const f=B("neon-button"),m=B("neon-badge"),r=B("neon-expansion-indicator");return h(),L("div",{class:S([[{"neon-dropdown--with-indicator":t.indicator,"neon-dropdown--open":t.modelValue,"neon-dropdown--open-on-hover":t.openOnHover,"neon-dropdown--icon-only":t.icon&&!t.label,"neon-dropdown--disabled":t.disabled},`neon-dropdown--${t.size}`,`neon-dropdown--${t.color}`],"neon-dropdown"])},[w("div",Y,[T(t.$slots,"dropdown-button",{},()=>[t.dropdownStyle==="text-button"||t.dropdownStyle==="solid-button"?(h(),L("div",Z,[y(f,{id:t.id,"alternate-color":t.alternateColor,"aria-expanded":t.modelValue,"button-style":t.dropdownStyle==="text-button"?"text":"solid",color:t.color,disabled:t.disabled,icon:t.icon,indicator:t.indicator,"indicator-expanded":t.modelValue,label:t.label,size:t.size,"aria-haspopup":"true",class:"neon-dropdown__button",onBlur:o[0]||(o[0]=u=>t.onBlur()),onClick:o[1]||(o[1]=u=>t.toggleOpen()),onFocus:o[2]||(o[2]=u=>t.onFocus())},null,8,["id","alternate-color","aria-expanded","button-style","color","disabled","icon","indicator","indicator-expanded","label","size"])])):(h(),L("div",{key:1,id:t.id,ref:"dropdownButton",tabindex:t.disabled?void 0:0,class:"neon-dropdown__badge",role:"button",onClick:o[3]||(o[3]=(...u)=>t.toggleOpen&&t.toggleOpen(...u)),onKeydown:[o[4]||(o[4]=C((...u)=>t.toggleOpen&&t.toggleOpen(...u),["enter"])),o[5]||(o[5]=C(K((...u)=>t.toggleOpen&&t.toggleOpen(...u),["stop","prevent"]),["space"]))]},[y(m,{"alternate-color":t.alternateColor,circular:t.dropdownStyle==="circular-badge",color:t.color,disabled:t.disabled,icon:t.icon,image:t.image,imageAlt:t.imageAlt,label:t.label,size:t.size},null,8,["alternate-color","circular","color","disabled","icon","image","imageAlt","label","size"]),t.indicator?(h(),X(r,{key:0,color:t.color,disabled:t.disabled,expanded:t.modelValue,class:"neon-button__indicator"},null,8,["color","disabled","expanded"])):j("",!0)],40,D))])],512),x,G(w("div",{ref:"dropdownContent",class:S([`neon-dropdown__content--${t.dropdownPlacement}`,"neon-dropdown__content"])},[T(t.$slots,"default")],2),[[N,t.openOnHover||t.modelValue]])],2)}const at=I(Q,[["render",_]]);export{at as N,p as a};
